<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>올베스트 내 주변 무당·타로·사주 찾기</title>
    <meta name="description" content="내 위치 기준으로 가장 가까운 무당집, 타로카페, 사주 명당 바로 찾기">

    <style>
        @import url('https://fonts.googleapis.com/css2?family=Nanum+Pen+Script&family=Gowun+Dodum&display=swap');

        /* === 공통 레이아웃 === */
        body {
            margin: 0;
            background: linear-gradient(135deg, #150028, #3b0070);
            color: #fff;
            font-family: 'Gowun Dodum', sans-serif;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            overflow-x: hidden;
        }

        /* 중앙 정렬 메인 래퍼 */
        .main-wrapper {
            width: 100%;
            max-width: 1200px;
            margin: 0 auto;
            padding: 10px 18px 30px;
            box-sizing: border-box;
        }

        h1 {
            font-family: 'Nanum Pen Script', cursive;
            font-size: 3rem;
            text-align: center;
            margin: 12px 0 18px;
            text-shadow: 0 0 40px #ffcc00;
            letter-spacing: .1rem;
        }

        .container {
            display: flex;
            gap: 18px;
        }

        .sidebar {
            width: 270px;
            background: rgba(255,255,255,0.06);
            padding: 18px 16px 20px;
            backdrop-filter: blur(10px);
            border-radius: 18px;
            border: 1px solid rgba(255,255,255,0.18);
            box-shadow: 0 10px 30px rgba(0,0,0,0.45);
            box-sizing: border-box;
        }

        .category {
            padding: 16px 14px;
            margin: 10px 0;
            background: rgba(255,255,255,0.12);
            border-radius: 14px;
            cursor: pointer;
            font-size: 1.4rem;
            text-align: center;
            transition: 0.25s;
            box-shadow: 0 6px 16px rgba(0,0,0,0.35);
        }

        .category.active,
        .category:hover {
            background: #ffcc00;
            color: #000;
            transform: translateY(-2px);
        }

        .info {
            margin-top: 16px;
            padding: 12px 10px;
            background: rgba(255,255,255,0.08);
            border-radius: 12px;
            font-size: 1.1rem;
            line-height: 1.6;
        }

        /* === 지도 영역 === */
        .map-wrap {
            flex: 1;
            position: relative;
            padding: 0;
            box-sizing: border-box;
            border-radius: 20px;
            overflow: hidden;
            box-shadow: 0 12px 30px rgba(0,0,0,0.6);
            background: #111;
        }

        #map {
            width: 100%;
            height: 60vh;
            min-height: 360px;
        }

        /* 내 위치 버튼 */
        .my-location-btn {
            position: absolute;
            right: 18px;
            top: 18px;
            z-index: 1000;
            padding: 8px 16px;
            background: rgba(255,255,255,0.95);
            color: #000;
            border-radius: 999px;
            font-size: 0.9rem;
            font-weight: bold;
            cursor: pointer;
            box-shadow: 0 4px 12px rgba(0,0,0,0.4);
            user-select: none;
        }

        .my-location-btn:active {
            transform: scale(0.96);
        }

        /* === 하단 영역 === */
        .bottom-bar {
            width: 100%;
            margin-top: auto;
            padding: 14px 0 26px;
            box-sizing: border-box;
        }

        .bottom-inner {
            max-width: 420px;
            margin: 0 auto;
            padding: 18px 24px 16px;
            border-radius: 24px;
            background: rgba(0, 0, 0, 0.55);
            backdrop-filter: blur(18px);
            border: 1px solid rgba(255,255,255,0.18);
            box-shadow: 0 10px 30px rgba(0,0,0,0.6);
            text-align: center;
        }

        .home-btn {
            display: inline-block;
            padding: 12px 46px;
            background: #ffcc00;
            color: #000;
            font-size: 1.8rem;
            border-radius: 999px;
            font-family: 'Nanum Pen Script', cursive;
            cursor: pointer;
            box-shadow: 0 8px 20px rgba(0,0,0,0.65);
            margin-bottom: 12px;
            transition: 0.2s;
            border: none;
        }

        .home-btn:hover {
            transform: translateY(-1px);
            box-shadow: 0 12px 26px rgba(0,0,0,0.75);
        }

        .bottom-meta {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 4px;
            font-size: 0.95rem;
        }

        .bottom-label {
            font-family: 'Nanum Pen Script', cursive;
            font-size: 1.5rem;
            color: #ffdf61;
        }

        .bottom-email {
            color: #ffffff;
            text-decoration: none;
            font-size: 1.05rem;
            letter-spacing: 0.02em;
        }

        .bottom-email:hover {
            text-decoration: underline;
        }

        /* === 모바일 === */
        @media (max-width: 900px) {
            .main-wrapper {
                padding: 10px 12px 24px;
            }

            h1 {
                font-size: 2.4rem;
                margin-bottom: 14px;
            }

            .container {
                flex-direction: column;
                gap: 14px;
            }

            .sidebar {
                width: 100%;
                max-width: 100%;
            }

            .map-wrap {
                border-radius: 18px;
            }

            #map {
                height: 55vh;
                min-height: 300px;
            }

            .bottom-inner {
                max-width: 90%;
            }

            .home-btn {
                font-size: 1.6rem;
                padding: 11px 38px;
            }
        }
    </style>
</head>
<body>
    <div class="main-wrapper">
        <h1>내 주변 무당·타로·사주</h1>

        <div class="container">
            <div class="sidebar">
                <div class="category active" data-type="mudang">무당 / 굿</div>
                <div class="category" data-type="tarot">타로카페</div>
                <div class="category" data-type="saju">사주 / 관상</div>

                <div class="info" id="info">
                    원하시는 종류를 선택하면<br>
                    현재 위치 기준으로 가까운 곳을 지도에 표시해드려요.<br><br>
                    위치 정보 허용 후 새로고침해주세요.
                </div>
            </div>

            <div class="map-wrap">
                <div id="map"></div>
                <div id="myLocationBtn" class="my-location-btn">내 위치로</div>
            </div>
        </div>
    </div>

    <div class="bottom-bar">
        <div class="bottom-inner">
            <button class="home-btn" onclick="location.href='index.html'">홈으로 가기</button>
            <div class="bottom-meta">
                <div class="bottom-label">제휴 · 광고 문의</div>
                <a class="bottom-email" href="mailto:vovs123@naver.com">vovs123@naver.com</a>
            </div>
        </div>
    </div>

    <!-- 네이버 지도 API -->
    <script src="https://oapi.map.naver.com/openapi/v3/maps.js?ncpKeyId=5c48rfrsdf&ver=3.19.1"></script>

    <script>
        let map, markers = [];
        let userMarker = null;

        const places = {
            mudang: [
                {name:"강남 보살", addr:"서울 강남구 역삼동", lat:37.5008, lng:127.0369, tel:"010-1111-2222"},
                {name:"홍대 유명 무당", addr:"서울 마포구 서교동", lat:37.5567, lng:126.9235, tel:"010-3333-4444"},
                {name:"부천 점집", addr:"경기 부천시", lat:37.5035, lng:126.7660, tel:"010-5555-6666"}
            ],
            tarot: [
                {name:"연남동 타로카페", addr:"서울 마포구 연남동", lat:37.5612, lng:126.9228, tel:"010-7777-8888"},
                {name:"익선동 타로", addr:"서울 종로구 익선동", lat:37.5740, lng:126.9892, tel:"010-9999-0000"},
                {name:"성수 타로명당", addr:"서울 성동구 성수동", lat:37.5443, lng:127.0560, tel:"010-1234-5678"}
            ],
            saju: [
                {name:"종로 사주카페", addr:"서울 종로구 인사동", lat:37.5728, lng:126.9867, tel:"02-123-4567"},
                {name:"명동 사주명당", addr:"서울 중구 명동", lat:37.5637, lng:126.9829, tel:"010-8888-9999"},
                {name:"신촌 관상집", addr:"서울 서대문구 창천동", lat:37.5581, lng:126.9365, tel:"010-2222-3333"}
            ]
        };

        function initMap() {
            map = new naver.maps.Map('map', {
                center: new naver.maps.LatLng(37.5665, 126.9780),
                zoom: 15
            });

            if (navigator.geolocation) {
                moveToCurrentLocation();
            }

            showPlaces('mudang');

            window.addEventListener('resize', () => {
                if (map) {
                    naver.maps.Event.trigger(map, 'resize');
                }
            });
        }

        function moveToCurrentLocation() {
            navigator.geolocation.getCurrentPosition(pos => {
                const userPos = new naver.maps.LatLng(pos.coords.latitude, pos.coords.longitude);
                map.setCenter(userPos);
                map.setZoom(15);

                if (!userMarker) {
                    userMarker = new naver.maps.Marker({
                        position: userPos,
                        map: map,
                        icon: {
                            url: 'data:image/svg+xml;charset=UTF-8,<svg xmlns="http://www.w3.org/2000/svg" width="40" height="40" viewBox="0 0 100 100"><circle cx="50" cy="50" r="40" fill="%23ffcc00"/><text x="50" y="60" font-size="60" text-anchor="middle" fill="%23000">You</text></svg>',
                            scaledSize: new naver.maps.Size(40,40)
                        },
                        title: "내 위치"
                    });
                } else {
                    userMarker.setPosition(userPos);
                }

                document.getElementById('info').innerHTML = `현재 위치 기준으로 표시중입니다`;
            }, () => {
                alert('현재 위치를 가져올 수 없습니다. 위치 권한을 확인해주세요.');
            });
        }

        document.getElementById('myLocationBtn').addEventListener('click', moveToCurrentLocation);

        function showPlaces(type) {
            markers.forEach(m => m.setMap(null));
            markers = [];

            places[type].forEach(p => {
                const marker = new naver.maps.Marker({
                    position: new naver.maps.LatLng(p.lat, p.lng),
                    map: map,
                    title: p.name
                });

                markers.push(marker);

                marker.addListener('click', () => {
                    new naver.maps.InfoWindow({
                        content: `
                            <div style="padding:12px 15px;background:#fff;color:#000;border-radius:10px;font-weight:bold;min-width:180px;">
                                <div style="margin-bottom:6px;">${p.name}</div>
                                <div style="font-size:0.9rem;color:#555;margin-bottom:8px;">${p.addr}</div>
                                <div style="margin-bottom:8px;">${p.tel}</div>
                                <a href="tel:${p.tel}" style="color:#ff6b6b;text-decoration:none;font-weight:bold;">전화하기</a>
                            </div>`
                    }).open(map, marker);
                });
            });
        }

        document.querySelectorAll('.category').forEach(el => {
            el.addEventListener('click', function () {
                document.querySelectorAll('.category').forEach(c => c.classList.remove('active'));
                this.classList.add('active');
                showPlaces(this.dataset.type);
            });
        });

        initMap();
    </script>
</body>
</html>
